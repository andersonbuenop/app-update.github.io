<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>SCCM Team</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css?v=5" />
</head>
<body>
<header>
  <h1>SCCM App Status</h1>
  <p>Visualização das applications disponiveis no Software Center, versões instaladas e disponíveis.</p>
</header>

<main>
  <div class="controls">
    <label>
      CSV:
      <input type="file" id="fileInput" accept=".csv,text/csv" />
    </label>
    <input type="text" id="searchInput" placeholder="Filtrar por nome, versão ou status..." />
    <div id="statusBadges" class="status-badges">
      <span class="badge" data-status="UpdateAvailable">
        <span class="dot dot-update"></span> UpdateAvailable
      </span>
      <span class="badge" data-status="UpToDate">
        <span class="dot dot-ok"></span> UpToDate
      </span>
      <span class="badge" data-status="Unknown">
        <span class="dot dot-unknown"></span> Unknown
      </span>
    </div>
  </div>

  <div class="table-container">
    <table id="appsTable">
      <thead>
        <tr>
          <th class="col-num">Nº</th>
          <th class="col-app" data-key="AppName">Aplicação</th>
          <th class="col-version" data-key="MergedVersion">Versão Instalada</th>
          <th class="col-version" data-key="LatestVersion">Última Versão Disponível</th>
          <th class="col-status" data-key="Status">Status</th>
          <th class="col-license" data-key="License">Licença</th>
          <th class="col-obs" data-key="Observacao">Observação</th>
          <th class="col-actions">Ações</th>
        </tr>
      </thead>
      <tbody>
        <!-- Linhas geradas via JS -->
      </tbody>
    </table>
  </div>
</main>

<!-- Modal de Edição -->
<div id="editModal" class="modal-overlay">
  <div class="modal-content">
    <h2>Editar Aplicação</h2>
    <form id="editForm" class="modal-form">
      <input type="hidden" id="editIndex">
      
      <label>
        Aplicação (AppName):
        <input type="text" id="editAppName" class="form-control" readonly>
      </label>
      
      <label>
        Versão Instalada (InstalledVersion):
        <input type="text" id="editInstalledVersion" class="form-control">
      </label>
      
      <label>
        Última Versão (LatestVersion):
        <input type="text" id="editLatestVersion" class="form-control">
      </label>
      
      <!-- Campos de URL do JSON -->
      <input type="hidden" id="editSourceKey">
      
      <label>
        URL de Busca (Search/Repo):
        <input type="text" id="editSearchUrl" class="form-control">
      </label>

      <label>
        URL de Saída (Output/Website):
        <input type="text" id="editOutputUrl" class="form-control">
      </label>

      <label>
        Licença:
        <select id="editLicense" class="form-control">
          <option value="Free">Free</option>
          <option value="Licensed">Licensed</option>
        </select>
      </label>

      <label>
        Observação:
        <textarea id="editObservacao" rows="3" class="form-control"></textarea>
      </label>
      
      <div class="modal-actions">
        <button type="button" onclick="closeModal()" class="btn btn-secondary">Cancelar</button>
        <button type="submit" class="btn btn-primary">Salvar</button>
      </div>
    </form>
  </div>
</div>

<script src="script.js?v=2"></script>
</body>
</html>
